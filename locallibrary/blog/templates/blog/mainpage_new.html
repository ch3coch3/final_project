{% extends "blog/base.html" %}
{% block content %}
    <div class="row">
        <div class="col-12 col-md-2">
            <div div class="btn-group-vertical h-90 d-inline-block" style="width: 11rem;">
                <button type="button" class="btn btn-light"><a href="area/Americas/">Americas</a></button>
                <button type="button" class="btn btn-light"><a href="area/Asia/">Asia</a></button>
                <button type="button" class="btn btn-light"><a href="area/Europe/">Europe</a></button>
                <button type="button" class="btn btn-light"><a href="area/Africa/">Africa</a></button>
                <button type="button" class="btn btn-light"><a href="area/Oceania/">Oceania</a></button>
            </div>
        </div>
        <div class="col-12 col-md-10">
            <br><br>          
            {% for post in posts %}
            <article class="media content-section">
                <img class="rounded-circle article-img" src="{{ post.author.image.url }}" alt="{{ post.author }}" width="25" height = "25">
                <div class="media-body bg-light">
                  <div class="article-metadata">
                    <h5><a class="mr-2 text-secondary" href="#">{{ post.author }}</a><br>
                   <small class="float-right">
                        <a href="{% url 'area' post.area %}">{{ post.area }}</a>
                        <!-- {% for cat in post.category %}
                            <a href="#">{{ cat }}</a>
                        {% endfor %} -->
                        ,{{ post.date_posted|date:"F d,Y"}}
                    </small><hr>
                    {% for tag in post.tags.all %}
                        <small><span class="badge badge-pill  text-info border border-info  float-right">
                        {{ tag }}
                        </span></small>
                    {% endfor %}
                    
                  </div></h5>
                  <h2 class="article-title text-secondary">{{ post.title }}</h2>
                  <p class="article-content">{{ post.content|safe|truncatechars_html:100 }}</p>
                  <a href="{% url 'post-detail' post.id %}" class="text-secondary float-right">(see more...)</a>
                </div>
              </article>
              <br>
            {% endfor %}
            <!-------換頁-------->
            {% if is_paginated %}

            {% if page_obj.has_previous %}
                <a class="btn btn-outline-info mb-4" href="?page=1">First</a>
                <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">Previous</a>
            {% endif %}

            {% for num in page_obj.paginator.page_range %}
                {% if page_obj.number == num %}
                    <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
                {% endif %}
            {% endfor %}

            {% if page_obj.has_next %}
                <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}">Next</a>
                <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
            {% endif %}


            {% endif %}
            <br>
        </div>
    </div>

{% endblock %} 